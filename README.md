# AndroidTest
Тестовое задание по Android

Данное тестовое задание представляет из себя мини-сервер эмулирующий работу квадрокоптера. Его поведение схоже с реальным дроном.

Сервер написан на языке Kotlin с использованием сборщика Gradle. Проблем с запуском возникнуть не должно.

### Функционал сервера:
0) Web-сервер с номером прошивки дрона по адресу https://<your_ip>/info
1) TCP-сервер (порт 8888) для первоначального соединения
2) UDP-сервер по отправке изображения в формате png
3) Сервер/клиент MAVLink* на основе UDP (порт 8001)

*MAVLink - специальный протокол для общения между наземными станциями и дронами. Ознакомиться с ним и его документацией можно на [официальном сайте https://mavlink.io/en/](https://mavlink.io/en/)

На сервере релизован микросервис [Heartbeat](https://mavlink.io/en/services/heartbeat.html) (по документации), по которому отслеживается подключение приложения к дрону.

Также реализована отправка сообщений типа [LOCAL_POSITION_NED](https://mavlink.io/en/messages/common.html#LOCAL_POSITION_NED).

Сервер умеет принимать сообщения типа [HEARTBEAT](https://mavlink.io/en/messages/common.html#HEARTBEAT) и [RC_CHANNELS_OVERRIDE](https://mavlink.io/en/messages/common.html#RC_CHANNELS_OVERRIDE)

#### Логика работы сервера
0) Ожидание подключения по TCP
1) После подключения запускается отправка картинок по UDP на такой же порт, что и в TCP соединении. Например, приложение создало TCP соединение на своём порте 39875, тогда изображения будут отправлятся на UDP-порт с номером 39875.
2) Запускается прием/отправка сообщений MAVLink
3) При превышении ожидания сообщения HEARTBEAT больше 5 секунд сервер закрывается и переходит в состояние 0


## Задание :
Написать приложение по управлению квадрокоптером используя функционал сервера (желательно использовать архитектурный паттерн [MVVM](https://ru.wikipedia.org/wiki/Model-View-ViewModel)).

Для этого:

0) Подключиться к серверу (по TCP и UDP) (реализовать возможность смены IP из приложения);
1) Реализовать отправку и прием сообщения типа MAVLink;
2) Реализовать микросервис HEARTBEAT;
3) Реализовать два стика управления, передающих дрону сообщения типа RC_CHANNELS_OVERRIDE c каналами: 1- throttle, 2-yaw, 3- pitch, 4- roll; каждая из переменных имеет диапазон [1000,2000];
![controller](https://slideplayer.com/16769568/97/images/slide_2.jpg)

Если все сделать верно - сервер в консоль будет логгировать пришедшие сообщения.

4) Реализовать приём сообщения типа LOCAL_POSITION_NED и выводить полученные данные на экран;
5) Принимать изображения от сервера и выводить на экран;
6) По адрессу https://<your_ip>/info принять массив [...,...] где ... номера версий прошивок дрона.
7) Сделать билд apk для Android 6.0+
8) как доп. сделать возможность закрытия и повторного открытия TCP соединения при работающем MAVLink соединении

Удачи :)
